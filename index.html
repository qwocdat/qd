<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sunwin Pro Mobile</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;900&display=swap" rel="stylesheet">
    <style>
        /* --- 1. RESET & BASIC --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body {
            margin: 0; padding: 0;
            background: #150505; color: #fff;
            font-family: 'Roboto', sans-serif;
            height: 100vh; width: 100vw;
            overflow: hidden; /* Ch·∫∑n cu·ªôn trang */
            display: flex; flex-direction: column;
        }

        /* --- 2. LAYOUT CH√çNH (MOBILE FIRST) --- */
        .app {
            display: flex; flex-direction: column;
            height: 100%; width: 100%;
            position: relative;
        }

        /* Header */
        .header {
            height: 60px; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(to bottom, #2c3e50, #000);
            border-bottom: 2px solid #d4af37;
            z-index: 10;
        }
        .balance {
            font-size: 18px; color: #f1c40f; font-weight: 900;
            background: rgba(0,0,0,0.5); padding: 5px 20px; border-radius: 20px;
            border: 1px solid #d4af37;
        }

        /* Game Area */
        .game-area {
            flex: 1; /* Chi·∫øm ph·∫ßn c√≤n l·∫°i */
            background: radial-gradient(circle, #3a0e0e 0%, #000 100%);
            display: flex; flex-direction: column;
            align-items: center; justify-content: space-evenly; /* Chia ƒë·ªÅu kho·∫£ng c√°ch */
            position: relative;
            padding-bottom: 60px; /* Ch·ª´a ch·ªó cho roadmap */
        }

        /* B√†n Ch∆°i (ƒêƒ©a + C·ª≠a) */
        .board-container {
            display: flex; align-items: center; justify-content: center;
            width: 100%; gap: 10px;
            margin-top: -20px;
        }

        /* C·ª≠a ƒë·∫∑t (Gate) */
        .gate {
            width: 28vw; height: 28vw; /* Vu√¥ng theo chi·ªÅu r·ªông m√†n h√¨nh */
            max-width: 140px; max-height: 140px;
            background: linear-gradient(180deg, #4b0d0d, #220505);
            border: 2px solid #6e4618; border-radius: 12px;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative; transition: 0.2s;
        }
        .gate.active { border-color: #f1c40f; box-shadow: 0 0 15px #f1c40f; transform: scale(1.05); }
        .gate-name { font-size: 24px; font-weight: 900; }
        .gate.tai .gate-name { color: white; -webkit-text-stroke: 1px #d4af37; }
        .gate.xiu .gate-name { color: white; -webkit-text-stroke: 1px #bdc3c7; }
        .my-bet { font-size: 12px; color: #2ecc71; margin-top: 5px; font-weight: bold; background: rgba(0,0,0,0.6); padding: 2px 5px; border-radius: 4px; }

        /* ƒêƒ©a Gi·ªØa (Plate) */
        .center-plate {
            width: 35vw; height: 35vw;
            max-width: 180px; max-height: 180px;
            background: radial-gradient(circle, #5e4018, #1f1302);
            border: 4px solid #d4af37; border-radius: 50%;
            position: relative;
            display: flex; justify-content: center; align-items: center;
        }

        .timer {
            position: absolute; top: -15px;
            width: 40px; height: 40px;
            background: #000; border: 2px solid #e74c3c; border-radius: 50%;
            color: #e74c3c; font-weight: bold; font-size: 20px;
            display: flex; justify-content: center; align-items: center;
            z-index: 5;
        }

        .dice-box { display: flex; gap: 5px; }
        .dice {
            width: 28px; height: 28px; background: #fff;
            border-radius: 6px; font-size: 20px; color: #c0392b;
            display: flex; justify-content: center; align-items: center;
        }

        .bowl {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 30% 30%, #f1c40f, #b8860b);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-weight: 900; color: rgba(0,0,0,0.2); font-size: 30px;
            transition: transform 0.4s ease-out, opacity 0.4s;
            z-index: 4;
        }
        .bowl.open { transform: translateY(-80px); opacity: 0; pointer-events: none; }
        .shaking { animation: shake 0.5s infinite; }
        @keyframes shake {
            0% { transform: translate(0,0); } 25% { transform: translate(-2px,2px); }
            75% { transform: translate(2px,-2px); } 100% { transform: translate(0,0); }
        }

        /* Controls */
        .controls { width: 95%; display: flex; flex-direction: column; gap: 10px; align-items: center; }
        .status-text { color: #f39c12; font-weight: bold; font-size: 14px; height: 20px; }
        
        .chip-list { display: flex; gap: 8px; justify-content: center; width: 100%; }
        .chip {
            width: 45px; height: 45px; border-radius: 50%;
            background: radial-gradient(#e67e22, #d35400); border: 2px dashed #fff;
            color: #fff; font-size: 10px; font-weight: bold;
            display: flex; justify-content: center; align-items: center;
        }
        .chip:active { transform: scale(0.9); }

        .btn-confirm {
            width: 80%; padding: 12px; border: none; border-radius: 25px;
            background: linear-gradient(#f1c40f, #f39c12);
            color: #000; font-weight: 900; font-size: 16px;
            box-shadow: 0 4px 10px rgba(241, 196, 15, 0.3);
        }
        .btn-confirm:disabled { filter: grayscale(1); opacity: 0.5; }

        /* Roadmap (Bottom) */
        .roadmap {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 50px;
            background: rgba(0,0,0,0.8); border-top: 1px solid #333;
            display: flex; align-items: center; padding: 0 10px; gap: 5px;
            overflow-x: auto;
        }
        .dot {
            width: 20px; height: 20px; border-radius: 50%; flex-shrink: 0;
            font-size: 10px; display: flex; justify-content: center; align-items: center;
        }
        .d-tai { background: #9b59b6; } .d-xiu { background: #2ecc71; }

        /* --- 3. TOOL POPUP (MOBILE OPTIMIZED) --- */
        .fab-tool {
            position: fixed; bottom: 70px; right: 20px;
            width: 50px; height: 50px; border-radius: 50%;
            background: #000; border: 2px solid #00ff00;
            color: #00ff00; display: flex; justify-content: center; align-items: center;
            font-size: 24px; box-shadow: 0 0 15px #00ff00; z-index: 100;
        }

        .tool-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 200;
            display: none; align-items: center; justify-content: center;
        }
        .tool-modal.show { display: flex; }

        .tool-content {
            width: 85%; background: #111; border: 2px solid #00ff00;
            padding: 20px; border-radius: 10px; text-align: center;
            font-family: monospace; position: relative;
        }
        .close-tool { position: absolute; top: 10px; right: 15px; color: #fff; font-size: 20px; }

        .hack-res { font-size: 40px; font-weight: bold; margin: 10px 0; }
        .h-tai { color: #e74c3c; } .h-xiu { color: #3498db; }
        
        .tool-btn {
            width: 100%; padding: 10px; margin-top: 10px;
            background: transparent; border: 1px solid #00ff00; color: #00ff00;
            font-weight: bold;
        }

        /* --- 4. START OVERLAY (FIX L·ªñI ƒê·ª®NG IM) --- */
        .start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .btn-start-game {
            padding: 15px 40px; background: #f1c40f; border: none;
            font-size: 20px; font-weight: bold; border-radius: 30px;
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }

        /* --- 5. RESPONSIVE PC (N·∫æU M·ªû TR√äN M√ÅY T√çNH) --- */
        @media (min-width: 768px) {
            .app { flex-direction: row; }
            .header { position: absolute; top: 0; width: 100%; background: transparent; border: none; }
            .game-area { justify-content: center; gap: 40px; }
            .gate { width: 180px; height: 180px; max-width: none; max-height: none; }
            .center-plate { width: 250px; height: 250px; max-width: none; max-height: none; }
            .dice { width: 40px; height: 40px; font-size: 30px; }
            .controls { width: 400px; }
            
            /* Tool tr√™n PC: Hi·ªán lu√¥n b√™n ph·∫£i */
            .fab-tool { display: none; }
            .tool-modal { position: relative; display: flex; width: 300px; background: #0d0d0d; border-left: 2px solid #00ff00; }
            .tool-content { width: 90%; border: none; background: transparent; }
            .close-tool { display: none; }
        }
    </style>
</head>
<body>

    <div class="start-overlay" id="startScreen">
        <h1 style="color:#f1c40f; margin-bottom: 20px;">SUNWIN VIP</h1>
        <button class="btn-start-game" onclick="startGameApp()">B·∫§M ƒê·ªÇ CH∆†I</button>
        <p style="color:#666; font-size: 12px; margin-top: 10px;">Mobile Optimized V4.0</p>
    </div>

    <div class="app">
        <div class="header">
            <div class="balance" id="balanceDisplay">10,000,000</div>
        </div>

        <div class="game-area">
            <div style="position:absolute; top: 40%; z-index: 50; font-size: 40px; font-weight:900; color:#f1c40f; text-shadow: 0 0 10px red; display:none" id="winMsg">WIN!</div>

            <div class="board-container">
                <div class="gate tai" id="gateTai" onclick="uiSelect('TAI')">
                    <div class="gate-name">T√ÄI</div>
                    <div class="my-bet" id="betTai">0</div>
                </div>

                <div class="center-plate">
                    <div class="timer" id="timer">15</div>
                    <div class="dice-box">
                        <div class="dice" id="d1"></div>
                        <div class="dice" id="d2"></div>
                        <div class="dice" id="d3"></div>
                    </div>
                    <div class="bowl" id="bowl">VIP</div>
                </div>

                <div class="gate xiu" id="gateXiu" onclick="uiSelect('XIU')">
                    <div class="gate-name">X·ªàU</div>
                    <div class="my-bet" id="betXiu">0</div>
                </div>
            </div>

            <div class="controls">
                <div class="status-text" id="status">S·∫µn s√†ng</div>
                <div class="chip-list">
                    <div class="chip" onclick="uiAddChip(100000)">100K</div>
                    <div class="chip" onclick="uiAddChip(500000)">500K</div>
                    <div class="chip" onclick="uiAddChip(1000000)">1M</div>
                    <div class="chip" style="background:#c0392b" onclick="uiReset()">H·ª¶Y</div>
                </div>
                <button class="btn-confirm" id="btnOk" onclick="uiConfirm()">ƒê·∫∂T C∆Ø·ª¢C</button>
            </div>

            <div class="roadmap" id="roadMap"></div>
        </div>

        <div class="fab-tool" onclick="toggleTool()">ü§ñ</div>
        <div class="tool-modal" id="toolModal">
            <div class="tool-content">
                <div class="close-tool" onclick="toggleTool()">‚úï</div>
                <div style="color:#00ff00; border-bottom:1px dashed; padding-bottom:5px">AI HACKER V4</div>
                <div style="font-size:12px; color:#555; margin:10px 0" id="toolLog">Waiting data...</div>
                
                <div class="hack-res" id="hackRes">---</div>
                <div style="color:#fff; font-size:12px" id="hackP">---</div>

                <button class="tool-btn" id="btnHack" onclick="runHack()">PH√ÇN T√çCH</button>
                <button class="tool-btn" onclick="runAuto()">AUTO C∆Ø·ª¢C</button>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIC CORE ---
        const Game = {
            balance: 10000000,
            state: 'STOP', // STOP, BETTING, SHAKING, RESULT
            timeLeft: 15,
            timerId: null,
            history: [],
            
            // Bet Info
            tempBet: 0,
            selected: null,
            confirmed: null,
            confirmedAmt: 0,

            // Tool Info
            prediction: null
        };

        const DICES = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
        
        // --- H√ÄM KH·ªûI ƒê·ªòNG (FIX L·ªñI) ---
        function startGameApp() {
            document.getElementById('startScreen').style.display = 'none';
            initRound();
        }

        // --- GAME LOOP ---
        function initRound() {
            clearInterval(Game.timerId);
            Game.state = 'BETTING';
            Game.timeLeft = 15;
            Game.tempBet = 0;
            Game.selected = null;
            Game.confirmed = null;
            Game.confirmedAmt = 0;
            Game.prediction = null;

            // Reset UI
            dom('bowl').classList.remove('open');
            dom('winMsg').style.display = 'none';
            dom('status').innerText = "M·ªúI ƒê·∫∂T C∆Ø·ª¢C";
            dom('status').style.color = "#f39c12";
            dom('btnOk').disabled = false;
            dom('btnHack').disabled = false;
            dom('betTai').innerText = "0";
            dom('betXiu').innerText = "0";
            dom('gateTai').classList.remove('active');
            dom('gateXiu').classList.remove('active');
            
            // Tool Reset
            dom('hackRes').innerText = "---";
            dom('hackRes').className = "hack-res";

            updateBalance();

            // Timer
            dom('timer').innerText = 15;
            Game.timerId = setInterval(() => {
                Game.timeLeft--;
                dom('timer').innerText = Game.timeLeft;
                if(Game.timeLeft <= 0) {
                    clearInterval(Game.timerId);
                    startShaking();
                }
            }, 1000);
        }

        function startShaking() {
            Game.state = 'SHAKING';
            dom('status').innerText = "ƒêANG L·∫ÆC...";
            dom('status').style.color = "red";
            dom('btnOk').disabled = true;
            dom('btnHack').disabled = true;
            dom('bowl').classList.add('shaking');

            setTimeout(() => {
                dom('bowl').classList.remove('shaking');
                showResult();
            }, 2000);
        }

        function showResult() {
            Game.state = 'RESULT';
            
            // Random Dice
            const r1 = rand(1,6);
            const r2 = rand(1,6);
            const r3 = rand(1,6);
            const total = r1+r2+r3;
            const type = (total >= 11 && total <= 17) ? 'TAI' : 'XIU';

            // Show UI
            dom('d1').innerText = DICES[r1-1];
            dom('d2').innerText = DICES[r2-1];
            dom('d3').innerText = DICES[r3-1];
            dom('bowl').classList.add('open');
            dom('status').innerText = `K·∫æT QU·∫¢: ${total} - ${type}`;
            dom('status').style.color = "#00ff00";

            // Calc Money
            if(Game.confirmed === type) {
                const win = Game.confirmedAmt * 2;
                Game.balance += win;
                dom('winMsg').innerText = `+${fmt(win)}`;
                dom('winMsg').style.display = 'block';
            }

            updateBalance();
            
            // History
            Game.history.push({t: type, v: total});
            if(Game.history.length > 20) Game.history.shift();
            renderRoadmap();

            setTimeout(initRound, 5000);
        }

        // --- USER INTERACTION ---
        function uiSelect(side) {
            if(Game.state !== 'BETTING' || Game.confirmed) return;
            Game.selected = side;
            
            dom('gateTai').classList.remove('active');
            dom('gateXiu').classList.remove('active');
            if(side === 'TAI') dom('gateTai').classList.add('active');
            if(side === 'XIU') dom('gateXiu').classList.add('active');
            
            Game.tempBet = 0; // Reset ti·ªÅn khi ch·ªçn c·ª≠a m·ªõi
            uiUpdateBet();
        }

        function uiAddChip(amt) {
            if(Game.state !== 'BETTING') return;
            if(!Game.selected) { alert("Ch·ªçn c·ª≠a tr∆∞·ªõc!"); return; }
            if(Game.balance - Game.confirmedAmt - Game.tempBet < amt) { alert("H·∫øt ti·ªÅn!"); return; }
            
            Game.tempBet += amt;
            uiUpdateBet();
        }

        function uiUpdateBet() {
            if(Game.selected === 'TAI') dom('betTai').innerText = fmt(Game.tempBet);
            if(Game.selected === 'XIU') dom('betXiu').innerText = fmt(Game.tempBet);
        }

        function uiReset() {
            if(Game.confirmed) return;
            Game.tempBet = 0;
            uiUpdateBet();
        }

        function uiConfirm() {
            if(Game.tempBet <= 0) return;
            Game.balance -= Game.tempBet;
            Game.confirmed = Game.selected;
            Game.confirmedAmt = Game.tempBet;
            
            updateBalance();
            dom('status').innerText = "ƒê√É ƒê·∫∂T C∆Ø·ª¢C";
            dom('btnOk').disabled = true;
        }

        // --- TOOL LOGIC ---
        function toggleTool() {
            const m = dom('toolModal');
            if(m.style.display === 'flex') m.style.display = 'none';
            else m.style.display = 'flex';
        }

        function runHack() {
            if(Game.state !== 'BETTING') { dom('toolLog').innerText = "ƒê·ª£i v√°n m·ªõi..."; return; }
            
            dom('btnHack').innerText = "...";
            dom('toolLog').innerText = "Scanning MD5...";
            
            setTimeout(() => {
                // Logic soi c·∫ßu fake
                let p = Math.random() > 0.5 ? 'TAI' : 'XIU';
                if(Game.history.length >= 3) {
                    const h = Game.history;
                    if(h[h.length-1].t === h[h.length-2].t && h[h.length-2].t === h[h.length-3].t) {
                        p = (h[h.length-1].t === 'TAI') ? 'XIU' : 'TAI'; // B·∫ª c·∫ßu
                    }
                }
                Game.prediction = p;
                
                dom('hackRes').innerText = p;
                dom('hackRes').className = `hack-res ${p==='TAI'?'h-tai':'h-xiu'}`;
                dom('hackP').innerText = "T·ªâ l·ªá: " + rand(70,95) + "%";
                dom('toolLog').innerText = "Done.";
                dom('btnHack').innerText = "PH√ÇN T√çCH";
            }, 1000);
        }

        function runAuto() {
            if(!Game.prediction) { alert("Ph√¢n t√≠ch tr∆∞·ªõc!"); return; }
            if(Game.confirmed) return;
            
            toggleTool(); // ƒê√≥ng tool
            uiSelect(Game.prediction);
            uiAddChip(500000); // 500k
            setTimeout(uiConfirm, 500);
        }

        // --- HELPERS ---
        function dom(id) { return document.getElementById(id); }
        function rand(min, max) { return Math.floor(Math.random()*(max-min+1)+min); }
        function fmt(n) { return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
        function updateBalance() { dom('balanceDisplay').innerText = fmt(Game.balance); }
        function renderRoadmap() {
            const r = dom('roadMap'); r.innerHTML = '';
            Game.history.forEach(h => {
                const d = document.createEleme
