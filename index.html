<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SUNWIN V19 STABLE</title>
    <style>
        /* --- 1. C·∫§U H√åNH C·ªêT L√ïI --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; user-select: none; font-family: Arial, sans-serif; }
        body {
            background: #000; height: 100vh; width: 100vw; overflow: hidden;
            display: flex; flex-direction: column;
            background: radial-gradient(circle, #380c0c 0%, #000 100%);
        }

        /* --- 2. HEADER & S·ªê D∆Ø (ƒê√£ Fix Flexbox) --- */
        .header {
            height: 60px; flex-shrink: 0;
            background: linear-gradient(180deg, #d4af37, #8c6028);
            border-bottom: 2px solid #fff;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px; z-index: 50;
        }

        .user-info { display: flex; align-items: center; gap: 8px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #fff; background: #333; overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .u-name { font-weight: bold; color: #2d1e03; font-size: 13px; }

        /* KHUNG S·ªê D∆Ø M·ªöI - D√πng Flexbox ƒë·ªÉ kh√¥ng b·ªã ƒë√® ch·ªØ */
        .balance-box {
            display: flex; align-items: center; 
            background: #000; border: 1px solid #ffd700; border-radius: 20px;
            padding: 3px 5px 3px 3px; /* CƒÉn ch·ªânh l·ªÅ */
            height: 38px; min-width: 140px;
            box-shadow: inset 0 0 10px #5c3c0d;
            gap: 8px; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
        }

        .icon-coin {
            width: 30px; height: 30px; border-radius: 50%;
            background: radial-gradient(#f1c40f, #d35400);
            border: 2px solid #fff; color: #5c3c0d;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; font-size: 18px; flex-shrink: 0;
        }

        .money-text {
            color: #f1c40f; font-weight: bold; font-size: 15px;
            flex: 1; text-align: right; white-space: nowrap; /* Kh√¥ng xu·ªëng d√≤ng */
            font-family: monospace; letter-spacing: -0.5px;
        }

        .btn-plus {
            width: 20px; height: 20px; background: #2ecc71;
            color: #fff; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; cursor: pointer; flex-shrink: 0;
        }

        /* --- 3. B√ÄN CH∆†I --- */
        .game-area {
            flex: 1; position: relative; width: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding-bottom: 120px; /* Ch·ª´a ch·ªó cho n√∫t */
        }

        .timer {
            font-size: 50px; font-weight: 900; color: #ff0000;
            text-shadow: 2px 2px 0 #000; margin-bottom: 20px;
        }

        .board { display: flex; width: 100%; align-items: center; justify-content: space-around; }

        .gate {
            width: 30vw; height: 30vw; max-width: 130px; max-height: 130px;
            background: #2b0505; border: 2px solid #b8860b; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); transition: 0.1s;
        }
        .gate.active { background: #4a0a0a; border-color: #ffd700; box-shadow: 0 0 20px #ffd700; transform: scale(1.05); }
        .g-name { color: #fff; font-size: 28px; font-weight: 900; }
        .g-bet { color: #ff0; font-size: 12px; font-weight: bold; margin-top: 5px; }

        .bowl-wrap {
            position: relative; width: 35vw; height: 35vw; max-width: 150px; max-height: 150px;
            display: flex; justify-content: center; align-items: center;
        }
        .plate {
            width: 100%; height: 100%; border-radius: 50%;
            background: radial-gradient(#d4af37, #5c3c0d); border: 4px solid #fff;
        }
        .bowl {
            position: absolute; top: -5px; left: -5px; width: 110%; height: 110%;
            background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b);
            border-radius: 50%; z-index: 10;
            box-shadow: 0 10px 20px #000;
            display: flex; justify-content: center; align-items: center;
            font-weight: 900; font-size: 22px; color: rgba(0,0,0,0.3);
            transition: 0.5s;
        }
        .bowl.open { transform: translateY(-200%); opacity: 0; }
        .bowl.shaking { animation: shake 0.5s infinite; }

        .dice-grp { position: absolute; z-index: 5; display: flex; gap: 5px; }
        .dice {
            width: 32px; height: 32px; background: #fff; border-radius: 6px;
            display: flex; justify-content: center; align-items: center;
            font-size: 24px; color: #000; font-weight: bold;
        }

        /* --- 4. CONTROL PANEL (Ghim ƒë√°y) --- */
        .controls {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(0,0,0,0.95); border-top: 2px solid #b8860b;
            padding: 10px 5px; z-index: 100;
            display: flex; flex-direction: column; gap: 8px;
        }

        .status { text-align: center; color: #fff; font-weight: bold; font-size: 14px; }

        .chip-list { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; justify-content: center; }
        .chip {
            width: 50px; height: 50px; border-radius: 50%; flex-shrink: 0;
            background: radial-gradient(#f39c12, #d35400); border: 2px dashed #fff;
            display: flex; justify-content: center; align-items: center;
            color: #000; font-weight: bold; font-size: 11px; cursor: pointer;
        }
        .chip.active { border: 2px solid #0f0; transform: scale(1.1); box-shadow: 0 0 10px #fff; }

        .btn-row { display: flex; width: 100%; height: 50px; }
        .btn { border: none; font-weight: bold; text-transform: uppercase; color: #fff; font-size: 16px; }
        .btn-cancel { width: 30%; background: #555; font-size: 14px; }
        .btn-ok { width: 70%; background: linear-gradient(to right, #e67e22, #f1c40f); font-size: 20px; font-weight: 900; }
        .btn-ok.disabled { background: #333; color: #777; pointer-events: none; }

        /* --- 5. TOOL --- */
        #tool-float {
            position: fixed; top: 70px; right: 0; background: #000;
            border: 1px solid #0f0; border-right: none; color: #0f0;
            padding: 8px 12px; border-radius: 20px 0 0 20px; font-weight: bold;
            z-index: 200; cursor: pointer; font-family: monospace;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, -2px) rotate(-2deg); }
            100% { transform: translate(1px, 2px) rotate(2deg); }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="user-info">
            <div class="avatar"><img src="https://ui-avatars.com/api/?name=V&background=random" alt=""></div>
            <div class="u-name">VIP MEMBER</div>
        </div>
        
        <div class="balance-box">
            <div class="icon-coin">$</div>
            <div class="money-text" id="balance">50.000.000</div>
            <div class="btn-plus" onclick="app.deposit()">+</div>
        </div>
    </div>

    <div class="game-area">
        <div class="timer" id="timer">15</div>

        <div class="board">
            <div class="gate" id="gate-tai" onclick="app.select('TAI')">
                <div class="g-name">T√ÄI</div>
                <div class="g-bet" id="bet-tai">0</div>
            </div>

            <div class="bowl-wrap">
                <div class="plate"></div>
                <div class="dice-grp">
                    <div class="dice" id="d1">1</div>
                    <div class="dice" id="d2">2</div>
                    <div class="dice" id="d3">3</div>
                </div>
                <div class="bowl" id="bowl">VIP</div>
            </div>

            <div class="gate" id="gate-xiu" onclick="app.select('XIU')">
                <div class="g-name">X·ªàU</div>
                <div class="g-bet" id="bet-xiu">0</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="status" id="status">Vui l√≤ng ch·ªçn c·ª≠a</div>
        
        <div class="chip-list">
            <div class="chip" onclick="app.setChip(100000)">100K</div>
            <div class="chip" onclick="app.setChip(500000)">500K</div>
            <div class="chip" onclick="app.setChip(1000000)">1M</div>
            <div class="chip" onclick="app.setChip(5000000)">5M</div>
            <div class="chip" onclick="app.setChip(10000000)">10M</div>
        </div>

        <div class="btn-row">
            <button class="btn btn-cancel" onclick="app.cancel()">H·ª¶Y</button>
            <button class="btn btn-ok" id="btn-ok" onclick="app.confirm()">ƒê·∫∂T C∆Ø·ª¢C</button>
        </div>
    </div>

    <div id="tool-float" onclick="tool.toggle()">ü§ñ TOOL: OFF</div>

    <script>
        // Logic game vi·∫øt theo ki·ªÉu an to√†n nh·∫•t
        const app = {
            bal: 50000000,
            currChip: 100000,
            tempBet: 0,
            side: null,
            state: 'BET',
            timer: 15,
            interval: null,

            // Kh·ªüi ch·∫°y ngay l·∫≠p t·ª©c
            init: function() {
                this.updateBal();
                this.startRound();
            },

            startRound: function() {
                // Reset to√†n b·ªô tr·∫°ng th√°i
                clearInterval(this.interval);
                this.state = 'BET';
                this.timer = 15;
                this.tempBet = 0;
                this.side = null;
                tool.hackRes = null; // Reset hack

                // Reset UI
                document.getElementById('timer').innerText = this.timer;
                document.getElementById('bowl').classList.remove('open', 'shaking');
                document.getElementById('gate-tai').classList.remove('active');
                document.getElementById('gate-xiu').classList.remove('active');
                document.getElementById('bet-tai').innerText = "0";
                document.getElementById('bet-xiu').innerText = "0";
                document.getElementById('btn-ok').innerText = "ƒê·∫∂T C∆Ø·ª¢C";
                document.getElementById('btn-ok').classList.remove('disabled');
                document.getElementById('status').innerText = "VUI L√íNG ƒê·∫∂T C∆Ø·ª¢C";
                
                // C·∫≠p nh·∫≠t Tool UI n·∫øu ƒëang b·∫≠t
                if(tool.isOn) tool.predict();

                // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c
                this.interval = setInterval(() => {
                    this.timer--;
                    document.getElementById('timer').innerText = this.timer;
                    if(this.timer <= 0) {
                        clearInterval(this.interval);
                        this.shake();
                    }
                }, 1000);
            },

            setChip: function(val) {
                this.currChip = val;
                document.getElementById('status').innerText = "ƒêang ch·ªçn chip: " + (val/1000) + "k";
            },

            select: function(s) {
                if(this.state !== 'BET') return;
                
                // N·∫øu ƒë·ªïi c·ª≠a th√¨ reset ti·ªÅn c≈© (ƒë·ªÉ ƒë∆°n gi·∫£n)
                if(this.side && this.side !== s) {
                    this.bal += this.tempBet; // Ho√†n ti·ªÅn c≈©
                    this.tempBet = 0;
                }

                this.side = s;
                
                if(this.bal >= this.currChip) {
                    this.tempBet += this.currChip;
                    this.bal -= this.currChip;
                    this.updateBal();
                    
                    // UI
                    document.getElementById('gate-tai').classList.remove('active');
                    document.getElementById('gate-xiu').classList.remove('active');
                    
                    if(s === 'TAI') {
                        document.getElementById('gate-tai').classList.add('active');
                        document.getElementById('bet-tai').innerText = this.fmt(this.tempBet);
                    } else {
                        document.getElementById('gate-xiu').classList.add('active');
                        document.getElementById('bet-xiu').innerText = this.fmt(this.tempBet);
                    }
                    document.getElementById('btn-ok').innerText = "CH·ªêT: " + this.fmt(this.tempBet);
                } else {
                    alert("Kh√¥ng ƒë·ªß ti·ªÅn");
                }
            },

            cancel: function() {
                if(this.state === 'BET' && this.tempBet > 0) {
                    this.bal += this.tempBet;
                    this.tempBet = 0;
                    this.side = null;
                    this.updateBal();
                    
                    document.getElementById('gate-tai').classList.remove('active');
                    document.getElementById('gate-xiu').classList.remove('active');
                    document.getElementById('bet-tai').innerText = "0";
                    document.getElementById('bet-xiu').innerText = "0";
                    document.getElementById('btn-ok').innerText = "ƒê·∫∂T C∆Ø·ª¢C";
                }
            },

            confirm: function() {
                if(this.state === 'BET' && this.tempBet > 0) {
                    document.getElementById('btn-ok').classList.add('disabled');
                    document.getElementById('btn-ok').innerText = "ƒê√É C∆Ø·ª¢C";
                    document.getElementById('status').innerText = "ƒê√É ƒê·∫∂T C∆Ø·ª¢C TH√ÄNH C√îNG";
                }
            },

            shake: function() {
                this.state = 'SHAKE';
                document.getElementById('btn-ok').classList.add('disabled');
                document.getElementById('bowl').classList.add('shaking');
                document.getElementById('status').innerText = "ƒêANG X√ìC...";
                
                setTimeout(() => {
                    document.getElementById('bowl').classList.remove('shaking');
                    this.result();
                }, 2000);
            },

            result: function() {
                this.state = 'RESULT';
                let d1, d2, d3, total, type;

                // Logic Tool Hack can thi·ªáp k·∫øt qu·∫£
                if(tool.isOn && tool.hackRes) {
                    type = tool.hackRes;
                    do {
                        d1 = Math.ceil(Math.random()*6);
                        d2 = Math.ceil(Math.random()*6);
                        d3 = Math.ceil(Math.random()*6);
                        total = d1+d2+d3;
                    } while( (type==='TAI' && total<=10) || (type==='XIU' && total>10) );
                } else {
                    d1 = Math.ceil(Math.random()*6);
                    d2 = Math.ceil(Math.random()*6);
                    d3 = Math.ceil(Math.random()*6);
                    total = d1+d2+d3;
                    type = total > 10 ? 'TAI' : 'XIU';
                }

                document.getElementById('d1').innerText = d1;
                document.getElementById('d2').innerText = d2;
                document.getElementById('d3').innerText = d3;
                
                // T√¥ ƒë·ªè n√∫t 1 v√† 4
                [d1,d2,d3].forEach((v,i) => document.getElementById('d'+(i+1)).style.color = (v===1||v===4)?'red':'black');

                document.getElementById('bowl').classList.add('open');
                document.getElementById('status').innerText = `K·∫æT QU·∫¢: ${total} - ${type}`;

                if(this.side === type && this.tempBet > 0) {
                    let win = this.tempBet * 2;
                    this.bal += win;
                    setTimeout(() => alert("B·∫†N TH·∫ÆNG: " + this.fmt(win)), 500);
                }

                this.updateBal();
                setTimeout(() => this.startRound(), 5000);
            },

            deposit: function() {
                this.bal += 10000000;
                this.updateBal();
                alert("ƒê√£ n·∫°p 10M");
            },

            updateBal: function() {
                document.getElementById('balance').innerText = this.fmt(this.bal);
            },

            fmt: function(n) { return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."); }
        };

        const tool = {
            isOn: false,
            hackRes: null,
            toggle: function() {
                this.isOn = !this.isOn;
                if(this.isOn) {
                    this.predict();
                } else {
                    document.getElementById('tool-float').innerText = "ü§ñ TOOL: OFF";
                    document.getElementById('tool-float').style.color = "#0f0";
                    this.hackRes = null;
                }
            },
            predict: function() {
                if(app.state !== 'BET') return;
                // D·ª± ƒëo√°n ng·∫´u nhi√™n cho v√°n n√†y
                this.hackRes = Math.random() > 0.5 ? 'TAI' : 'XIU';
                document.getElementById('tool-float').innerText = "üéØ B√ÅO: " + this.hackRes;
                document.getElementById('tool-float').style.color = "#ff0000";
            }
        };

        // Ch·∫°y game (G·ªçi tr·ª±c ti·∫øp kh√¥ng ch·ªù onload ƒë·ªÉ tr√°nh l·ªói ƒë·ª©ng h√¨nh)
        app.init();

    </script>
</body>
</html>
