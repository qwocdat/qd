<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SUNWIN REAL FIXED</title>
    <style>
        /* --- C·∫§U H√åNH C∆† B·∫¢N --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; margin: 0; padding: 0; }
        body {
            background: #000; font-family: Arial, sans-serif;
            height: 100vh; width: 100vw; overflow: hidden;
            display: flex; flex-direction: column;
            background: radial-gradient(circle, #3a0e0e 0%, #000 100%);
        }

        /* --- 1. HEADER (C·ªë ƒë·ªãnh 60px) --- */
        .header {
            height: 60px; flex-shrink: 0;
            background: linear-gradient(180deg, #d4af37, #b8860b);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px; border-bottom: 2px solid #fff;
            z-index: 10;
        }
        .user { font-weight: bold; color: #2d1e03; font-size: 14px; }
        .bal-box {
            background: #000; color: #ffd700; padding: 5px 15px;
            border-radius: 20px; font-weight: bold; border: 1px solid #ffd700;
        }

        /* --- 2. B√ÄN CH∆†I (T·ª± co gi√£n ph·∫ßn gi·ªØa) --- */
        .game-area {
            flex: 1; position: relative; width: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Soi c·∫ßu */
        .history {
            position: absolute; top: 10px; height: 30px; background: rgba(0,0,0,0.5);
            border-radius: 15px; padding: 0 10px; display: flex; align-items: center; gap: 5px;
        }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .dot.T { background: #0f0; box-shadow: 0 0 5px #0f0; } /* T√†i */
        .dot.X { background: #f00; box-shadow: 0 0 5px #f00; } /* X·ªâu */

        /* B√†n c∆∞·ª£c */
        .board {
            display: flex; align-items: center; justify-content: space-between;
            width: 100%; padding: 0 5px;
        }
        
        .gate {
            width: 30vw; height: 30vw; max-width: 120px; max-height: 120px;
            background: #2a0a0a; border: 2px solid #b8860b; border-radius: 10px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; transition: 0.1s;
        }
        .gate.active { background: #4e1a1a; border-color: #ffd700; box-shadow: 0 0 15px #ffd700; transform: scale(1.05); }
        .gate-title { color: #fff; font-weight: 900; font-size: 24px; }
        .gate-bet { color: #ffd700; font-size: 12px; margin-top: 5px; font-weight: bold; }

        /* B√°t ƒëƒ©a */
        .plate-area {
            position: relative; width: 35vw; height: 35vw; max-width: 150px; max-height: 150px;
            display: flex; justify-content: center; align-items: center;
        }
        .plate {
            width: 100%; height: 100%; border-radius: 50%;
            background: radial-gradient(#d4af37, #5c3c0d); border: 3px solid #fff;
        }
        .bowl {
            position: absolute; width: 110%; height: 110%; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b);
            z-index: 5; box-shadow: 0 5px 15px #000;
            display: flex; justify-content: center; align-items: center;
            font-size: 20px; font-weight: bold; color: #5c3c0d;
            transition: transform 0.5s;
        }
        .bowl.open { transform: translateY(-150%); opacity: 0; pointer-events: none; }
        
        /* X√∫c x·∫Øc */
        .dice-wrap { position: absolute; z-index: 2; display: flex; gap: 2px; }
        .dice { 
            width: 30px; height: 30px; background: #fff; border-radius: 5px; 
            display: flex; justify-content: center; align-items: center;
            font-size: 20px; color: #000; font-weight: bold;
        }

        /* Timer */
        .timer-badge {
            position: absolute; top: -20px; background: #000; border: 2px solid red;
            color: red; width: 40px; height: 40px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 18px;
            z-index: 20;
        }

        /* --- 3. ƒêI·ªÄU KHI·ªÇN (Lu√¥n ·ªü d∆∞·ªõi ƒë√°y, Z-index cao nh·∫•t) --- */
        .controls {
            flex-shrink: 0; background: #1a0505; border-top: 2px solid #b8860b;
            padding: 10px; display: flex; flex-direction: column; gap: 10px;
            z-index: 9999; /* QUAN TR·ªåNG: ƒê·∫£m b·∫£o n√∫t lu√¥n b·∫•m ƒë∆∞·ª£c */
        }

        .status { text-align: center; color: #fff; font-size: 14px; min-height: 20px; }

        .chips { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .chip {
            min-width: 50px; height: 50px; border-radius: 50%;
            background: url('https://i.imgur.com/w9M7f1g.png'); /* Fallback color below */
            background: radial-gradient(#f1c40f, #d35400);
            border: 2px dashed #fff; display: flex; justify-content: center; align-items: center;
            color: #000; font-weight: bold; font-size: 11px; cursor: pointer;
        }
        .chip.active { border: 2px solid #0f0; transform: scale(1.1); }

        .btns { display: flex; gap: 10px; width: 100%; }
        .btn {
            border: none; padding: 12px; border-radius: 5px;
            font-weight: bold; font-size: 16px; flex: 1; cursor: pointer;
            color: #fff; text-transform: uppercase;
        }
        .btn-cancel { background: #555; flex: 0.5; }
        .btn-ok { background: linear-gradient(#e67e22, #d35400); flex: 1.5; }
        .btn.disabled { opacity: 0.5; pointer-events: none; background: #333; }

        /* --- 4. TOOL HACK --- */
        .tool-btn {
            position: fixed; top: 70px; right: 0; background: #000; border: 1px solid #0f0;
            color: #0f0; padding: 5px 10px; border-radius: 10px 0 0 10px; z-index: 999; cursor: pointer;
        }

        /* Hi·ªáu ·ª©ng rung */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shaking { animation: shake 0.5s infinite; }

    </style>
</head>
<body>

    <div class="header">
        <div class="user">VIP MEMBER</div>
        <div class="bal-box" id="balance">50.000.000</div>
    </div>

    <div class="game-area">
        <div class="history" id="history"></div>
        
        <div class="timer-badge" id="timer">15</div>

        <div class="board">
            <div class="gate" id="gate-tai" onclick="game.select('TAI')">
                <div class="gate-title">T√ÄI</div>
                <div class="gate-bet" id="bet-tai">0</div>
            </div>

            <div class="plate-area">
                <div class="plate"></div>
                <div class="dice-wrap">
                    <div class="dice" id="d1">1</div>
                    <div class="dice" id="d2">2</div>
                    <div class="dice" id="d3">3</div>
                </div>
                <div class="bowl" id="bowl">SUNWIN</div>
            </div>

            <div class="gate" id="gate-xiu" onclick="game.select('XIU')">
                <div class="gate-title">X·ªàU</div>
                <div class="gate-bet" id="bet-xiu">0</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="status" id="status">Vui l√≤ng ch·ªçn c·ª≠a c∆∞·ª£c</div>

        <div class="chips">
            <div class="chip" onclick="game.setChip(100000)">100K</div>
            <div class="chip" onclick="game.setChip(500000)">500K</div>
            <div class="chip" onclick="game.setChip(1000000)">1M</div>
            <div class="chip" onclick="game.setChip(5000000)">5M</div>
            <div class="chip" onclick="game.setChip(10000000)">10M</div>
        </div>

        <div class="btns">
            <button class="btn btn-cancel" onclick="game.cancel()">H·ª¶Y</button>
            <button class="btn btn-ok" id="btn-confirm" onclick="game.confirm()">ƒê·∫∂T C∆Ø·ª¢C</button>
        </div>
    </div>

    <div class="tool-btn" id="tool-display" onclick="game.toggleTool()">ü§ñ TOOL: OFF</div>

    <script>
        // ƒê·∫£m b·∫£o code ch·∫°y sau khi HTML load xong
        document.addEventListener('DOMContentLoaded', function() {
            game.init();
        });

        const game = {
            bal: 50000000,
            currChip: 100000,
            tempBet: 0,
            side: null, // 'TAI' or 'XIU'
            isBetting: true,
            timer: 15,
            interval: null,
            history: [],
            toolEnabled: false,
            nextResult: null, // Hack result

            init: function() {
                this.updateBal();
                this.startTimer();
                this.renderHistory();
            },

            // --- H·ªÜ TH·ªêNG TIMER (ƒê√£ s·ª≠a l·ªói kh√¥ng ch·∫°y) ---
            startTimer: function() {
                clearInterval(this.interval);
                this.timer = 15;
                this.isBetting = true;
                this.side = null;
                this.tempBet = 0;
                this.nextResult = null; // Reset hack
                
                // Reset UI
                document.getElementById('timer').innerText = this.timer;
                document.getElementById('bowl').classList.remove('open', 'shaking');
                document.getElementById('gate-tai').classList.remove('active');
                document.getElementById('gate-xiu').classList.remove('active');
                document.getElementById('bet-tai').innerText = "0";
                document.getElementById('bet-xiu').innerText = "0";
                document.getElementById('status').innerText = "VUI L√íNG ƒê·∫∂T C∆Ø·ª¢C";
                document.getElementById('btn-confirm').classList.remove('disabled');

                // Tool Hack Check
                if(this.toolEnabled) {
                    this.nextResult = Math.random() > 0.5 ? 'TAI' : 'XIU';
                    document.getElementById('tool-display').innerText = "ü§ñ V·ªÄ: " + this.nextResult;
                    document.getElementById('tool-display').style.color = "#0f0";
                }

                // Loop
                this.interval = setInterval(() => {
                    this.timer--;
                    document.getElementById('timer').innerText = this.timer;
                    
                    if (this.timer <= 0) {
                        clearInterval(this.interval);
                        this.shake();
                    }
                }, 1000);
            },

            // --- H·ªÜ TH·ªêNG C∆Ø·ª¢C (ƒê√£ s·ª≠a l·ªói kh√¥ng b·∫•m ƒë∆∞·ª£c) ---
            setChip: function(val) {
                this.currChip = val;
                // Hi·ªáu ·ª©ng Visual ƒë·ªÉ bi·∫øt ƒë√£ ch·ªçn chip
                document.getElementById('status').innerText = "ƒê√£ ch·ªçn chip: " + (val/1000) + "k";
            },

            select: function(s) {
                if (!this.isBetting) return;
                
                // N·∫øu ƒë·ªïi c·ª≠a th√¨ reset ti·ªÅn c∆∞·ª£c c·ª≠a c≈©
                if(this.side && this.side !== s) {
                    this.tempBet = 0;
                }

                this.side = s;
                
                // C·ªông d·ªìn ti·ªÅn
                if (this.bal >= this.currChip) {
                    this.tempBet += this.currChip;
                    // C·∫≠p nh·∫≠t UI ngay l·∫≠p t·ª©c
                    document.getElementById('gate-tai').classList.remove('active');
                    document.getElementById('gate-xiu').classList.remove('active');
                    
                    if(s === 'TAI') {
                        document.getElementById('gate-tai').classList.add('active');
                        document.getElementById('bet-tai').innerText = this.fmt(this.tempBet);
                    } else {
                        document.getElementById('gate-xiu').classList.add('active');
                        document.getElementById('bet-xiu').innerText = this.fmt(this.tempBet);
                    }
                } else {
                    alert("H·∫øt ti·ªÅn r·ªìi ƒë·∫°i gia!");
                }
            },

            confirm: function() {
                if(this.tempBet > 0 && this.isBetting) {
                    this.bal -= this.tempBet;
                    this.updateBal();
                    document.getElementById('status').innerText = "ƒê√É CH·ªêT C∆Ø·ª¢C TH√ÄNH C√îNG";
                    document.getElementById('btn-confirm').classList.add('disabled');
                    this.isBetting = false; // Kh√≥a c∆∞·ª£c
                }
            },

            cancel: function() {
                if(this.isBetting) {
                    this.tempBet = 0;
                    this.side = null;
                    document.getElementById('gate-tai').classList.remove('active');
                    document.getElementById('gate-xiu').classList.remove('active');
                    document.getElementById('bet-tai').innerText = "0";
                    document.getElementById('bet-xiu').innerText = "0";
                }
            },

            // --- X·ª¨ L√ù K·∫æT QU·∫¢ ---
            shake: function() {
                document.getElementById('status').innerText = "ƒêANG X√ìC...";
                document.getElementById('bowl').classList.add('shaking');
                
                setTimeout(() => {
                    document.getElementById('bowl').classList.remove('shaking');
                    this.result();
                }, 2000);
            },

            result: function() {
                let d1, d2, d3, total, resType;

                // N·∫øu c√≥ Tool Hack
                if(this.nextResult) {
                    resType = this.nextResult;
                    // Random Dice sao cho kh·ªõp k·∫øt qu·∫£
                    do {
                        d1 = Math.ceil(Math.random()*6);
                        d2 = Math.ceil(Math.random()*6);
                        d3 = Math.ceil(Math.random()*6);
                        total = d1 + d2 + d3;
                    } while( (resType === 'TAI' && total <= 10) || (resType === 'XIU' && total > 10) );
                } else {
                    // Random th·∫≠t
                    d1 = Math.ceil(Math.random()*6);
                    d2 = Math.ceil(Math.random()*6);
                    d3 = Math.ceil(Math.random()*6);
                    total = d1 + d2 + d3;
                    resType = total > 10 ? 'TAI' : 'XIU';
                }

                // Render X√∫c x·∫Øc
                document.getElementById('d1').innerText = d1;
                document.getElementById('d2').innerText = d2;
                document.getElementById('d3').innerText = d3;
                
                // M·ªü b√°t
                document.getElementById('bowl').classList.add('open');
                document.getElementById('status').innerText = `K·∫æT QU·∫¢: ${total} - ${resType}`;

                // Tr·∫£ th∆∞·ªüng
                if(this.side === resType && !this.isBetting) { 
                    // !isBetting nghƒ©a l√† ƒë√£ b·∫•m ch·ªët c∆∞·ª£c
                    let win = this.tempBet * 2;
                    this.bal += win;
                    setTimeout(() => alert("CH√öC M·ª™NG! B·∫†N TH·∫ÆNG " + this.fmt(win)), 500);
                }

                this.updateBal();
                
                // L∆∞u l·ªãch s·ª≠
                this.history.push(resType === 'TAI' ? 'T' : 'X');
                if(this.history.length > 15) this.history.shift();
                this.renderHistory();

                // V√°n m·ªõi
                setTimeout(() => {
                    this.startTimer();
                }, 4000);
            },

            // --- TI·ªÜN √çCH ---
            toggleTool: function() {
                this.toolEnabled = !this.toolEnabled;
                if(!this.toolEnabled) {
                    document.getElementById('tool-display').innerText = "ü§ñ TOOL: OFF";
                    document.getElementById('tool-display').style.color = "#0f0";
                    this.nextResult = null;
                } else {
                    alert("ƒê√£ b·∫≠t Tool Hack!");
                }
            },
            
            updateBal: function() {
                document.getElementById('balance').innerText = this.fmt(this.bal);
            },
            
            renderHistory: function() {
                let h = document.getElementById('history');
                h.innerHTML = '';
                this.history.forEach(r => {
                    let d = document.createElement('div');
                    d.className = 'dot ' + r;
                    h.appendChild(d);
                });
            },
            
            fmt: function(n) { return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."); }
        };
    </script>
</body>
</html>
