<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SUNWIN MOBILE V15</title>
    <style>
        /* --- 1. RESET & C·∫§U H√åNH C∆† B·∫¢N --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; touch-action: manipulation; margin: 0; padding: 0; }
        body {
            background: #000;
            font-family: Arial, sans-serif;
            height: 100vh; width: 100vw;
            overflow: hidden; /* Ch·∫∑n cu·ªôn trang */
            display: flex; flex-direction: column;
            background: radial-gradient(circle at center, #420808 0%, #1a0202 70%, #000 100%);
        }

        /* --- 2. HEADER (T·ªêI ∆ØU MOBILE) --- */
        .header {
            height: 60px; width: 100%; flex-shrink: 0;
            background: linear-gradient(180deg, #cd9933, #f2dca5, #b88a2d);
            border-bottom: 2px solid #5a390f;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px; z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.8);
        }
        .user-info { display: flex; align-items: center; gap: 8px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #fff; background: #333; overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .user-details { display: flex; flex-direction: column; }
        .u-name { font-weight: bold; font-size: 13px; color: #4b2c10; }
        .u-id { font-size: 10px; color: #555; }

        .balance-pill {
            background: #111; border: 1px solid #ffd700; border-radius: 20px;
            padding: 4px 12px; display: flex; align-items: center; gap: 5px;
            color: #ffd700; font-weight: bold; font-size: 15px;
            box-shadow: inset 0 0 5px #ffd700;
        }

        /* --- 3. B√ÄN CH∆†I (GAME AREA) --- */
        .game-board {
            flex: 1; position: relative; width: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Soi c·∫ßu */
        .history-wrap {
            position: absolute; top: 10px; width: 95%; height: 26px;
            background: rgba(0,0,0,0.6); border-radius: 13px;
            display: flex; align-items: center; justify-content: flex-end;
            padding: 0 8px; gap: 4px; overflow: hidden; border: 1px solid #444;
        }
        .dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
        .dot.tai { background: #00e600; box-shadow: 0 0 4px #00e600; }
        .dot.xiu { background: #ff0000; box-shadow: 0 0 4px #ff0000; }

        /* Khu v·ª±c ƒêƒ©a & C·ª≠a ƒë·∫∑t (Layout Flex) */
        .bet-area {
            width: 100%; display: flex; align-items: center; justify-content: space-between;
            padding: 0 5px; margin-top: 15px;
        }

        /* C·ª≠a T√†i / X·ªâu */
        .gate {
            width: 28vw; height: 28vw; max-width: 120px; max-height: 120px;
            background: linear-gradient(180deg, #590d0d, #2e0505);
            border: 2px solid #8c6028; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; transition: all 0.2s;
            box-shadow: 0 5px 10px rgba(0,0,0,0.6);
        }
        .gate.active { border-color: #ffd700; box-shadow: 0 0 15px #ffd700; transform: scale(1.05); }
        .gate-label { font-size: 24px; font-weight: 900; color: #fff; text-shadow: 2px 2px 0 #000; font-family: Tahoma, sans-serif; }
        .gate-money { 
            position: absolute; bottom: 5px; 
            font-size: 11px; color: #ffff00; font-weight: bold; 
            background: rgba(0,0,0,0.8); padding: 2px 6px; border-radius: 4px;
        }

        /* ƒêƒ©a ·ªü gi·ªØa */
        .plate-container {
            width: 38vw; height: 38vw; max-width: 160px; max-height: 160px;
            position: relative; display: flex; justify-content: center; align-items: center;
        }
        .plate-bg {
            width: 100%; height: 100%; border-radius: 50%;
            background: radial-gradient(#b8860b, #4b2c10);
            border: 4px solid #ffd700; box-shadow: 0 10px 20px #000;
        }
        .bowl {
            position: absolute; width: 105%; height: 105%; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b, #3d1e05);
            z-index: 10; display: flex; justify-content: center; align-items: center;
            box-shadow: inset 0 -5px 15px rgba(0,0,0,0.5), 0 10px 25px #000;
            transition: transform 0.4s ease-out, opacity 0.3s;
        }
        .bowl.open { transform: translateY(-150%); opacity: 0; pointer-events: none; }
        
        /* X√∫c x·∫Øc */
        .dice-grp {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            display: flex; gap: 3px; z-index: 5;
        }
        .dice {
            width: 28px; height: 28px; background: #fff; border-radius: 6px;
            display: flex; justify-content: center; align-items: center;
            font-size: 20px; font-weight: bold; color: #d00;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        /* ƒê·ªìng h·ªì */
        .timer {
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 40px; height: 40px; background: #000; border: 2px solid red; border-radius: 50%;
            color: red; display: flex; justify-content: center; align-items: center;
            font-weight: bold; font-size: 18px; z-index: 20; box-shadow: 0 0 10px red;
        }

        /* Th√¥ng b√°o th·∫Øng */
        .win-noti {
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
            z-index: 50; text-align: center; display: none; width: 100%;
        }
        .win-text { font-size: 50px; font-weight: 900; color: #ffeb3b; text-shadow: 0 0 20px #f00; -webkit-text-stroke: 2px #b00; }
        .win-amt { font-size: 24px; color: #fff; font-weight: bold; text-shadow: 1px 1px 2px #000; margin-top: -10px; }

        /* --- 4. CONTROLS (THANH ƒêI·ªÄU KHI·ªÇN) --- */
        .controls {
            background: #140505; border-top: 2px solid #b8860b;
            padding: 8px; display: flex; flex-direction: column; gap: 8px;
            flex-shrink: 0;
        }
        
        /* Thanh tr·∫°ng th√°i */
        .status-bar { text-align: center; color: #f39c12; font-size: 14px; font-weight: bold; margin-bottom: 2px; }

        /* Ch·ªçn chip (Cu·ªôn ngang) */
        .chip-scroll {
            display: flex; gap: 12px; overflow-x: auto; padding-bottom: 5px;
            justify-content: flex-start; /* Cho ph√©p cu·ªôn t·ª´ tr√°i */
            padding-left: 5px; padding-right: 5px;
        }
        /* ·∫®n thanh cu·ªôn */
        .chip-scroll::-webkit-scrollbar { display: none; }
        
        .chip {
            width: 50px; height: 50px; border-radius: 50%; flex-shrink: 0;
            display: flex; justify-content: center; align-items: center;
            font-size: 11px; font-weight: 900; color: #000; cursor: pointer;
            border: 2px dashed rgba(255,255,255,0.4); box-shadow: 0 3px 0 #5e431f;
        }
        .chip:active { transform: scale(0.9); }
        /* M√†u chip */
        .c-100k { background: radial-gradient(#e74c3c, #c0392b); color: #fff; }
        .c-500k { background: radial-gradient(#9b59b6, #8e44ad); color: #fff; }
        .c-1m { background: radial-gradient(#f1c40f, #f39c12); }
        .c-5m { background: radial-gradient(#3498db, #2980b9); color: #fff; }
        .c-10m { background: radial-gradient(#fff, #bdc3c7); border: 2px solid gold; }

        /* H√†ng n√∫t b·∫•m (Flex row ƒë·ªÉ kh√¥ng b·ªã len ra ngo√†i) */
        .btn-row { display: flex; gap: 6px; width: 100%; }
        .btn {
            border: none; border-radius: 8px; height: 45px;
            font-weight: 900; font-size: 14px; color: #3e2723;
            text-transform: uppercase; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 3px 0 rgba(0,0,0,0.5);
        }
        .btn:active { transform: translateY(2px); box-shadow: none; }
        
        /* Chia t·ª∑ l·ªá n√∫t h·ª£p l√Ω */
        .btn-cancel { flex: 1; background: #95a5a6; color: #fff; font-size: 12px; }
        .btn-allin { flex: 1; background: #e74c3c; color: #fff; font-size: 12px; }
        .btn-ok { flex: 2.5; background: linear-gradient(to bottom, #f1c40f, #f39c12); font-size: 18px; }
        
        .btn.disabled { opacity: 0.5; filter: grayscale(1); pointer-events: none; }

        /* Tool Icon */
        #tool-btn {
            position: fixed; top: 70px; right: 0; padding: 8px 12px;
            background: #000; border: 1px solid #0f0; border-right: none;
            border-radius: 20px 0 0 20px; color: #0f0; font-weight: bold;
            z-index: 200; font-size: 12px; box-shadow: 0 0 10px #00f;
        }

        /* Animation Rung */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shaking { animation: shake 0.5s infinite; }
    </style>
</head>
<body>

    <div class="header">
        <div class="user-info">
            <div class="avatar"><img src="https://ui-avatars.com/api/?name=Vip&background=random" alt="A"></div>
            <div class="user-details">
                <span class="u-name">VIP MEMBER</span>
                <span class="u-id">ID: 888999</span>
            </div>
        </div>
        <div class="balance-pill">
            <span>$</span> <span id="balance">50.000.000</span>
        </div>
    </div>

    <div class="game-board">
        <div class="history-wrap" id="history"></div>
        
        <div class="win-noti" id="win-noti">
            <div class="win-text">N·ªî H≈®</div>
            <div class="win-amt" id="win-amt">+0</div>
        </div>

        <div class="bet-area">
            <div class="gate" id="gate-tai" onclick="game.select('TAI')">
                <div class="gate-label">T√ÄI</div>
                <div class="gate-money" id="bet-tai">0</div>
            </div>

            <div class="plate-container">
                <div class="timer" id="timer">00</div>
                <div class="plate-bg"></div>
                <div class="dice-grp">
                    <div class="dice" id="d1">1</div>
                    <div class="dice" id="d2">2</div>
                    <div class="dice" id="d3">3</div>
                </div>
                <div class="bowl" id="bowl"></div>
            </div>

            <div class="gate" id="gate-xiu" onclick="game.select('XIU')">
                <div class="gate-label">X·ªàU</div>
                <div class="gate-money" id="bet-xiu">0</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="status-bar" id="status">VUI L√íNG ƒê·∫∂T C∆Ø·ª¢C</div>
        
        <div class="chip-scroll">
            <div class="chip c-100k" onclick="game.addChip(100000)">100K</div>
            <div class="chip c-500k" onclick="game.addChip(500000)">500K</div>
            <div class="chip c-1m" onclick="game.addChip(1000000)">1M</div>
            <div class="chip c-5m" onclick="game.addChip(5000000)">5M</div>
            <div class="chip c-10m" onclick="game.addChip(10000000)">10M</div>
        </div>

        <div class="btn-row">
            <button class="btn btn-cancel" onclick="game.cancel()">H·ª¶Y</button>
            <button class="btn btn-allin" onclick="game.allin()">T·∫§T TAY</button>
            <button class="btn btn-ok" id="btn-ok" onclick="game.confirm()">ƒê·∫∂T C∆Ø·ª¢C</button>
        </div>
    </div>

    <div id="tool-btn" onclick="tool.activate()">ü§ñ TOOL OFF</div>

    <script>
        const game = {
            balance: 50000000,
            state: 'STOP',
            tempBet: 0,
            side: null, // 'TAI' or 'XIU'
            confirmed: 0,
            confirmedSide: null,
            timer: 0,
            interval: null,
            history: [],
            isHack: false, // Tr·∫°ng th√°i hack
            hackResult: null,

            // Ch·∫°y khi t·∫£i xong
            start: function() {
                this.updateBal();
                this.renderHistory();
                this.newRound();
            },

            newRound: function() {
                this.state = 'BETTING';
                this.tempBet = 0;
                this.side = null;
                this.confirmed = 0;
                this.confirmedSide = null;
                this.hackResult = null;
                
                // Reset UI
                document.getElementById('bowl').classList.remove('open', 'shaking');
                document.getElementById('win-noti').style.display = 'none';
                document.getElementById('gate-tai').classList.remove('active');
                document.getElementById('gate-xiu').classList.remove('active');
                document.getElementById('btn-ok').classList.remove('disabled');
                document.getElementById('status').innerText = "TH·ªúI GIAN ƒê·∫∂T C∆Ø·ª¢C";
                document.getElementById('status').style.color = "#f39c12";
                this.updateBetUI();

                // N·∫øu c√≥ tool, t√≠nh tr∆∞·ªõc k·∫øt qu·∫£
                if(this.isHack) {
                    this.hackResult = Math.random() > 0.5 ? 'TAI' : 'XIU';
                    document.getElementById('tool-btn').innerText = "ü§ñ V·ªÄ: " + this.hackResult;
                } else {
                    document.getElementById('tool-btn').innerText = "ü§ñ TOOL OFF";
                }

                // Timer
                this.timer = 15; 
                document.getElementById('timer').innerText = this.timer;
                clearInterval(this.interval);
                this.interval = setInterval(() => {
                    this.timer--;
                    document.getElementById('timer').innerText = this.timer < 10 ? '0'+this.timer : this.timer;
                    if(this.timer <= 0) {
                        clearInterval(this.interval);
                        this.shake();
                    }
                }, 1000);
            },

            // Logic c∆∞·ª£c
            select: function(s) {
                if(this.state !== 'BETTING' || this.confirmedSide) return;
                this.side = s;
                // Highlight UI
                document.getElementById('gate-tai').classList.remove('active');
                document.getElementById('gate-xiu').classList.remove('active');
                if(s === 'TAI') document.getElementById('gate-tai').classList.add('active');
                else document.getElementById('gate-xiu').classList.add('active');
                
                // Reset tempBet n·∫øu ƒë·ªïi c·ª≠a (logic ƒë∆°n gi·∫£n)
                // this.tempBet = 0; 
                this.updateBetUI();
            },

            addChip: function(val) {
                if(this.state !== 'BETTING' || !this.side || this.confirmedSide) {
                    if(!this.side && this.state === 'BETTING') alert("Vui l√≤ng ch·ªçn c·ª≠a (T√†i/X·ªâu) tr∆∞·ªõc!");
                    return;
                }
                if(this.balance - this.tempBet >= val) {
                    this.tempBet += val;
                    this.updateBetUI();
                } else {
                    alert("S·ªë d∆∞ kh√¥ng ƒë·ªß!");
                }
            },

            allin: function() {
                if(this.state !== 'BETTING' || !this.side || this.confirmedSide) return;
                this.tempBet = this.balance;
                this.updateBetUI();
            },

            cancel: function() {
                if(this.state !== 'BETTING' || this.confirmedSide) return;
                this.tempBet = 0;
                this.updateBetUI();
            },

            confirm: function() {
                if(this.tempBet <= 0) return;
                this.confirmedSide = this.side;
                this.confirmed = this.tempBet;
                this.balance -= this.confirmed;
                this.updateBal();
                document.getElementById('status').innerText = "ƒê√É ƒê·∫∂T C∆Ø·ª¢C TH√ÄNH C√îNG";
                document.getElementById('btn-ok').classList.add('disabled');
            },

            // Logic X·ª≠ l√Ω k·∫øt qu·∫£
            shake: function() {
                this.state = 'SHAKING';
                document.getElementById('status').innerText = "NH√Ä C√ÅI ƒêANG X√ìC...";
                document.getElementById('bowl').classList.add('shaking');
                document.getElementById('btn-ok').classList.add('disabled');
                
                setTimeout(() => {
                    document.getElementById('bowl').classList.remove('shaking');
                    this.openResult();
                }, 2000);
            },

            openResult: function() {
                this.state = 'RESULT';
                let d1, d2, d3, total, resType;

                // Logic Random ho·∫∑c Hack
                if(this.isHack && this.hackResult) {
                    // Force result
                    resType = this.hackResult;
                    do {
                        d1 = Math.ceil(Math.random()*6);
                        d2 = Math.ceil(Math.random()*6);
                        d3 = Math.ceil(Math.random()*6);
                        total = d1+d2+d3;
                    } while( (resType==='TAI' && total<=10) || (resType==='XIU' && total>10) );
                } else {
                    // Random thu·∫ßn
                    d1 = Math.ceil(Math.random()*6);
                    d2 = Math.ceil(Math.random()*6);
                    d3 = Math.ceil(Math.random()*6);
                    total = d1+d2+d3;
                    resType = total > 10 ? 'TAI' : 'XIU';
                }

                // Hi·ªÉn th·ªã x√∫c x·∫Øc
                document.getElementById('d1').innerText = d1;
                document.getElementById('d2').innerText = d2;
                document.getElementById('d3').innerText = d3;
                
                // M√†u x√∫c x·∫Øc (ƒë·ªè cho 1 v√† 4 cho ƒë·∫πp)
                [d1,d2,d3].forEach((v,i) => {
                   document.getElementById('d'+(i+1)).style.color = (v===1||v===4) ? 'red' : 'black';
                });

                document.getElementById('bowl').classList.add('open');
                document.getElementById('status').innerText = `K·∫æT QU·∫¢: ${total} - ${resType}`;
                document.getElementById('status').style.color = "#fff";

                // X·ª≠ l√Ω th·∫Øng thua
                if(this.confirmedSide === resType) {
                    let win = this.confirmed * 2; // T·ªâ l·ªá 1:1
                    this.balance += win;
                    
                    document.getElementById('win-noti').style.display = 'block';
                    document.getElementById('win-amt').innerText = "+" + this.fmt(win);
                    setTimeout(() => this.updateBal(), 1000);
                }

                // C·∫≠p nh·∫≠t l·ªãch s·ª≠
                this.history.push(resType);
                if(this.history.length > 15) this.history.shift();
                this.renderHistory();

                // V√°n m·ªõi
                setTimeout(() => this.newRound(), 5000);
            },

            // Utils
            updateBal: function() 
