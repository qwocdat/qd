<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L·∫§Y KEY VIP | QUOCDAT SEC</title>
    
    <script>
        var currentUser = localStorage.getItem('vip_username');
        if(!currentUser) { window.location.href = "login.html"; }
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #00ff88; --bg: #050505; --glass: rgba(255,255,255,0.03); --border: rgba(255,255,255,0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: #fff; overflow-x: hidden; }
        header { position: fixed; top: 0; left: 0; width: 100%; padding: 15px 0; z-index: 2000; background: rgba(10,10,10,0.95); border-bottom: 1px solid var(--border); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .nav-flex { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Orbitron'; font-size: 22px; font-weight: 900; color: #fff; text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .logo i { color: var(--primary); }
        .desktop-menu { display: flex; gap: 25px; }
        .desktop-menu a { color: #aaa; text-decoration: none; font-size: 14px; font-weight: 600; }
        .desktop-menu a.active { color: var(--primary); }
        .hamburger { display: none; font-size: 26px; color: #fff; padding: 10px; cursor: pointer; }
        .mobile-nav { position: fixed; top: 0; right: -100%; width: 85%; max-width: 300px; height: 100vh; background: #0a0a0a; z-index: 3000; padding: 80px 30px; transition: right 0.3s; border-left: 1px solid var(--border); }
        .mobile-nav a.menu-link { display: block; color: #fff; text-decoration: none; font-size: 16px; padding: 15px 0; border-bottom: 1px solid #1a1a1a; font-weight: 600; }
        .close-btn { position: absolute; top: 20px; right: 20px; font-size: 30px; color: #ff5555; cursor: pointer; }

        .key-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 120px 20px 60px; }
        .key-box { width: 100%; max-width: 600px; background: var(--glass); border: 1px solid var(--border); border-radius: 20px; padding: 40px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .box-icon { font-size: 50px; color: var(--primary); margin-bottom: 20px; }
        .box-title { font-family: 'Orbitron'; font-size: 28px; color: #fff; margin-bottom: 10px; }
        .box-desc { color: #aaa; font-size: 14px; margin-bottom: 30px; line-height: 1.6; }

        .form-group { text-align: left; margin-bottom: 25px; }
        .form-group label { display: block; font-size: 13px; color: var(--primary); font-weight: bold; margin-bottom: 8px; }
        .form-select { width: 100%; padding: 15px; background: #111; border: 1px solid #444; border-radius: 12px; color: #fff; font-size: 15px; outline: none; cursor: pointer; }
        .btn-generate { width: 100%; padding: 18px; background: var(--primary); color: #000; font-weight: bold; font-size: 16px; border: none; border-radius: 12px; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; font-family: 'Orbitron'; }
        
        /* TERMINAL HACKER (Hi·ªÉn th·ªã khi ƒëang load 100 Proxy) */
        .terminal-box { display: none; text-align: left; background: #000; border: 1px solid #333; border-radius: 10px; padding: 20px; margin-top: 20px; box-shadow: inset 0 0 15px rgba(0,255,136,0.1); }
        .progress-container { width: 100%; background: #222; border-radius: 5px; height: 15px; margin-bottom: 15px; overflow: hidden; }
        .progress-bar { width: 0%; height: 100%; background: var(--primary); transition: width 0.1s; box-shadow: 0 0 10px var(--primary); }
        .proxy-log { font-family: monospace; font-size: 12px; color: #00ff88; height: 80px; overflow-y: hidden; line-height: 1.8; opacity: 0.8; }
        .proxy-percent { font-family: 'Orbitron'; color: var(--primary); font-size: 20px; text-align: right; margin-top: -30px; margin-bottom: 15px; }

        .result-box { display: none; padding: 25px; background: rgba(0,255,136,0.05); border: 1px dashed var(--primary); border-radius: 15px; margin-top: 20px; }
        .result-title { color: var(--primary); font-weight: bold; font-size: 14px; margin-bottom: 10px; text-transform: uppercase; }
        .key-display { font-family: monospace; font-size: 24px; color: #fff; font-weight: bold; background: #000; padding: 15px; border-radius: 10px; border: 1px solid #333; margin-bottom: 15px; letter-spacing: 2px;}
        .btn-copy { background: #00b8ff; color: #fff; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 14px; width: 100%; }

        @media (max-width: 768px) { .desktop-menu, #desktopAuth { display: none; } .hamburger { display: block; } .key-box { padding: 30px 20px; } .box-title { font-size: 22px; } .key-display { font-size: 20px; } }
    </style>
</head>
<body>

    <header>
        <div class="container nav-flex">
            <a href="index.html" class="logo"><i class="fas fa-shield-alt"></i> QUOCDAT.SEC</a>
            <nav class="desktop-menu"><a href="index.html">Trang Ch·ªß</a><a href="shop.html">Kho File VIP</a><a href="getkey.html" class="active">L·∫•y Key</a><a href="naptien.html" style="color:#00b8ff">N·∫°p Ti·ªÅn</a></nav>
            <div id="desktopAuth"></div>
            <i class="fas fa-bars hamburger" onclick="document.getElementById('mobileNav').style.right = '0px'"></i>
        </div>
    </header>

    <div class="mobile-nav" id="mobileNav">
        <i class="fas fa-times close-btn" onclick="document.getElementById('mobileNav').style.right = '-100%'"></i>
        <div id="mobileUserArea"></div>
        <a href="index.html" class="menu-link"><i class="fas fa-home"></i> Trang Ch·ªß</a>
        <a href="shop.html" class="menu-link"><i class="fas fa-download"></i> Kho T√†i Li·ªáu VIP</a>
        <a href="getkey.html" class="menu-link" style="color:var(--primary)"><i class="fas fa-key"></i> L·∫•y Key</a>
        <a href="naptien.html" class="menu-link" style="color:#00b8ff"><i class="fas fa-wallet"></i> N·∫°p Ti·ªÅn H·ªá Th·ªëng</a>
    </div>

    <div class="key-container">
        <div class="key-box">
            <i class="fas fa-key box-icon"></i>
            <h1 class="box-title">H·ªÜ TH·ªêNG GET KEY VIP</h1>
            
            <div id="selectionArea">
                <p class="box-desc">H·ªá th·ªëng y√™u c·∫ßu b·∫°n v∆∞·ª£t 1 link r√∫t g·ªçn Link4M ƒë·ªÉ l·∫•y m√£ m·ªü kh√≥a t·∫£i Tool Mi·ªÖn Ph√≠.</p>
                <div class="form-group">
                    <label>üî• Ch·ªçn Tool C·∫ßn M·ªü Kh√≥a</label>
                    <select id="toolSelect" class="form-select">
                        <option value="" disabled selected>-- B·∫•m ƒë·ªÉ ch·ªçn Tool --</option>
                        <option value="tool03">Script Blox Fruit Auto Farm</option>
                        <option value="tool05">Code HTML Landing Page ƒê·∫πp</option>
                        <option value="tool07">Fix Lag Roblox Ch·ªëng VƒÉng</option>
                        <option value="tool10">Python Basic Obfuscator</option>
                        <option value="tool12">Tool Spam SMS/Zalo Call Troll</option>
                        <option value="tool15">Script Get Token FB Full Quy·ªÅn</option>
                        <option value="tool18">Auto Clicker PC Si√™u Nh·∫π 1MB</option>
                        <option value="tool20">Script Report FB X√≥a K√™nh</option>
                        <option value="tool23">Script Hack Map Moba Hi·ªán ƒê·ªãch</option>
                        <option value="tool25">Ph·∫ßn M·ªÅm L·ªçc SƒêT/Email Si√™u T·ªëc</option>
                        <option value="tool28">B·ªô 50 Template CV Xin Vi·ªác Coder</option>
                    </select>
                </div>
                <button class="btn-generate" id="btnGen" onclick="startLink4m()">
                    <span id="btnText">V∆Ø·ª¢T LINK L·∫§Y KEY</span>
                </button>
            </div>

            <div class="terminal-box" id="terminalBox">
                <div style="color:#aaa; font-size:12px; margin-bottom:5px;">Kh·ªüi t·∫°o h·ªá th·ªëng ·∫©n danh an to√†n...</div>
                <div class="progress-container">
                    <div class="progress-bar" id="pBar"></div>
                </div>
                <div class="proxy-percent" id="pPercent">0%</div>
                <div class="proxy-log" id="pLog">
                    > Connecting to secure server...<br>
                </div>
            </div>

            <div class="result-box" id="resultBox">
                <div class="result-title">üîë KEY C·ª¶A B·∫†N ƒê√É S·∫¥N S√ÄNG</div>
                <div class="key-display" id="finalKey">ƒêANG T·∫†O...</div>
                <button class="btn-copy" onclick="copyMyKey()">Sao Ch√©p M√£ Key</button>
                <div style="font-size:13px; color:#ff5555; margin-top:15px; font-weight:bold;">‚ö†Ô∏è Ch√∫ √Ω: Key n√†y ch·ªâ d√†nh cho Tool b·∫°n ƒë√£ ch·ªçn v√† s·∫Ω t·ª± h·ªßy sau 15 ph√∫t!</div>
                <button onclick="window.location.href='getkey.html'" style="margin-top:15px; background:none; border:1px solid #444; color:#aaa; padding:10px; border-radius:8px; cursor:pointer; width:100%;">T·∫°o Key Kh√°c</button>
            </div>
        </div>
    </div>

    <script>
        // API LINK4M
        const LINK4M_API_KEY = "6992df868b3d1e423d1ab833"; 

        // KHI TR·ªû V·ªÄ T·ª™ LINK4M S·∫º CH·∫†Y HI·ªÜU ·ª®NG PROXY
        document.addEventListener("DOMContentLoaded", function() {
            let urlParams = new URLSearchParams(window.location.search);
            let step = urlParams.get('step');
            let targetToolId = urlParams.get('tool');

            if(step === '2' && targetToolId) {
                document.getElementById('selectionArea').style.display = 'none';
                document.getElementById('terminalBox').style.display = 'block';
                
                runProxyAnimation(targetToolId);
            }
        });

        // HI·ªÜU ·ª®NG LOAD 100 PROXY
        function runProxyAnimation(toolId) {
            let progress = 0;
            const pBar = document.getElementById('pBar');
            const pPercent = document.getElementById('pPercent');
            const pLog = document.getElementById('pLog');
            
            const countries = ['US', 'UK', 'VN', 'JP', 'RU', 'DE', 'FR', 'CA', 'BR', 'AU', 'IN', 'KR', 'SG', 'IT', 'NL'];
            
            let interval = setInterval(() => {
                progress += 2; // Ch·∫°y nhanh ƒë·ªÉ ƒë·ª° m·ªèi tay (m·∫•t kho·∫£ng 3-4 gi√¢y)
                
                pBar.style.width = progress + '%';
                pPercent.innerText = progress + '%';
                
                // Random text log
                let ip = Math.floor(Math.random()*255) + "." + Math.floor(Math.random()*255) + ".x.x";
                let port = Math.floor(Math.random()*9000) + 1000;
                let ctry = countries[Math.floor(Math.random() * countries.length)];
                
                pLog.innerHTML = `> Bypassing proxy ${ip}:${port} [${ctry}]... OK<br>` + pLog.innerHTML;

                if(progress >= 100) {
                    clearInterval(interval);
                    pLog.innerHTML = "> ƒê√£ k·∫øt n·ªëi 100 Proxy an to√†n. ƒêang t·∫°o Key MD5... OK<br>" + pLog.innerHTML;
                    
                    setTimeout(() => {
                        // Sinh KEY th·∫≠t
                        let now = Math.floor(Date.now() / 1000);
                        let timeStep = Math.floor(now / 900); 
                        let hash = CryptoJS.MD5("QUOC_DAT_SECRET_2026" + timeStep + toolId).toString();
                        let finalKey = "quocdat_" + hash.substring(0, 10);
                        
                        document.getElementById('terminalBox').style.display = 'none';
                        document.getElementById('finalKey').innerText = finalKey;
                        document.getElementById('resultBox').style.display = 'block';
                    }, 800);
                }
            }, 60);
        }

        // B·∫§M V∆Ø·ª¢T LINK ƒê√Å SANG LINK4M
        function startLink4m() {
            let toolId = document.getElementById('toolSelect').value;
            if(!toolId) { alert("‚ö†Ô∏è Vui l√≤ng ch·ªçn 1 Tool!"); return; }

            document.getElementById('btnText').innerText = "ƒêANG T·∫†O LINK4M...";
            document.getElementById('btnGen').style.pointerEvents = 'none';

            let cleanUrl = window.location.href.split('?')[0].split('#')[0]; 
            let returnUrl = cleanUrl + "?step=2&tool=" + toolId; 
            
            let apiUrl = `https://link4m.co/api-shorten/v2?api=${LINK4M_API_KEY}&url=${encodeURIComponent(returnUrl)}`;

            fetch(apiUrl)
            .then(res => res.json())
            .then(data => {
                if(data.status === 'error') {
                    alert("L·ªói Link4M: " + data.message);
                    document.getElementById('btnText').innerText = "V∆Ø·ª¢T LINK L·∫§Y KEY";
                    document.getElementById('btnGen').style.pointerEvents = 'auto';
                } else {
                    window.location.href = data.shortenedUrl; 
                }
            })
            .catch(err => {
                // FALLBACK N·∫æU M·∫†NG L·ªñI HO·∫∂C H·∫æT TI·ªÄN API (TEST LOCAL)
                setTimeout(() => { window.location.href = returnUrl; }, 1000);
            });
        }

        function copyMyKey() {
            navigator.clipboard.writeText(document.getElementById('finalKey').innerText).then(() => alert("‚úÖ ƒê√£ copy m√£!"));
        }

        // FIREBASE UI
        try {
            const config = {
                apiKey: "AIzaSyAWaCeduRtSP74OkRYJ6wvw8LPPkoLGsGc",
                authDomain: "quocdat-b80c2.firebaseapp.com",
                databaseURL: "https://quocdat-b80c2-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "quocdat-b80c2",
                storageBucket: "quocdat-b80c2.firebasestorage.app",
                messagingSenderId: "988520495087",
                appId: "1:988520495087:web:97c1b46fc0f6d1f3aaa81a"
            };
            firebase.initializeApp(config);
            firebase.database().ref('users/' + currentUser).on('value', (s) => {
                let bal = s.exists() ? (s.val().balance || 0) : 0;
                let fm = bal.toLocaleString('vi-VN') + " ƒë";
                let dA = document.getElementById('desktopAuth');
                if(dA) dA.innerHTML = `<div style="display:flex;align-items:center;gap:15px;background:rgba(255,255,255,0.1);padding:6px 15px;border-radius:30px;border:1px solid rgba(255,255,255,0.2);"><div style="color:#00ff88;font-weight:bold;font-family:'Orbitron';font-size:14px;padding-right:15px;border-right:1px solid #444;">${fm}</div><div style="color:#fff;font-weight:bold;font-size:14px;">${currentUser}</div></div>`;
            });
        } catch(e) {}
    </script>
</body>
</html>
