<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KHO TÀI LIỆU VIP | QUOCDAT SEC</title>
    
    <script>
        const user = localStorage.getItem('vip_username');
        if(!user) { window.location.href = "login.html"; }
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* === GIỮ NGUYÊN PHONG CÁCH CŨ === */
        :root { --primary: #00ff88; --bg: #050505; --glass: rgba(255,255,255,0.03); --border: rgba(255,255,255,0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; font-family: 'Inter', sans-serif; }
        body { background: var(--bg) url('https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=2574&auto=format&fit=crop') center/cover no-repeat fixed; color: #fff; overflow-x: hidden; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: -1; }
        
        /* HEADER & MENU (GIỮ NGUYÊN) */
        header { position: fixed; top: 0; left: 0; width: 100%; padding: 15px 0; z-index: 2000; background: rgba(10,10,10,0.9); backdrop-filter: blur(15px); border-bottom: 1px solid var(--border); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .nav-flex { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Orbitron'; font-size: 22px; font-weight: 900; color: #fff; text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .logo i { color: var(--primary); }
        .desktop-menu { display: flex; gap: 25px; }
        .desktop-menu a { color: #aaa; text-decoration: none; font-size: 14px; font-weight: 600; transition:0.3s; }
        .desktop-menu a:hover, .desktop-menu a.active { color: var(--primary); }
        .hamburger { display: none; font-size: 28px; cursor: pointer; color: #fff; padding: 10px; }
        .mobile-nav { position: fixed; top: 0; right: 0; width: 85%; max-width: 320px; height: 100vh; background: #0a0a0a; z-index: 3000; padding: 80px 30px; transform: translateX(100%); transition: 0.4s ease; border-left: 1px solid var(--border); }
        .mobile-nav.open { transform: translateX(0); }
        .mobile-nav a { display: block; color: #fff; text-decoration: none; font-size: 16px; padding: 15px 0; border-bottom: 1px solid #1a1a1a; font-weight: 600; }

        /* === BỐ CỤC SHOP MỚI (GIỐNG TAINGUYENSIEURE NHƯNG STYLE TỐI) === */
        .main-layout { display: flex; margin-top: 80px; min-height: 100vh; }
        
        /* SIDEBAR DANH MỤC */
        .sidebar { width: 250px; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); border-right: 1px solid var(--border); padding: 20px; position: fixed; height: calc(100vh - 80px); overflow-y: auto; }
        .sidebar-title { font-family: 'Orbitron'; color: var(--primary); margin-bottom: 20px; font-size: 18px; }
        .cat-list a { display: flex; align-items: center; gap: 10px; padding: 12px; color: #aaa; text-decoration: none; border-radius: 8px; transition: 0.3s; margin-bottom: 5px; font-weight: 600; font-size: 14px; }
        .cat-list a:hover, .cat-list a.active { background: rgba(0,255,136,0.1); color: var(--primary); }
        .cat-list i { width: 20px; }

        /* NỘI DUNG CHÍNH */
        .shop-content { flex: 1; padding: 20px; margin-left: 250px; }
        
        /* THANH TÌM KIẾM & LỌC */
        .shop-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px; }
        .search-box { flex: 1; max-width: 500px; position: relative; }
        .search-box input { width: 100%; padding: 12px 20px 12px 45px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 50px; color: #fff; outline: none; transition: 0.3s; }
        .search-box input:focus { border-color: var(--primary); box-shadow: 0 0 10px rgba(0,255,136,0.2); }
        .search-box i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #666; }
        .sort-box select { padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 8px; color: #fff; outline: none; cursor: pointer; }

        /* LƯỚI SẢN PHẨM CHUYÊN NGHIỆP */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; }
        .product-card { background: var(--glass); border: 1px solid var(--border); border-radius: 15px; overflow: hidden; transition: 0.3s; backdrop-filter: blur(10px); display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 5px 15px rgba(0,255,136,0.1); }
        
        .prod-thumb { height: 140px; background: #111; display: flex; align-items: center; justify-content: center; color: #333; font-size: 40px; position: relative; }
        /* Thay ảnh thật vào đây: background: url('link_anh') center/cover; */
        .prod-tag { position: absolute; top: 10px; right: 10px; background: var(--primary); color: #000; padding: 3px 10px; border-radius: 20px; font-size: 10px; font-weight: bold; }
        
        .prod-details { padding: 15px; flex: 1; display: flex; flex-direction: column; }
        .prod-title { font-size: 16px; font-weight: bold; margin-bottom: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .prod-meta { display: flex; justify-content: space-between; font-size: 12px; color: #888; margin-bottom: 15px; }
        .prod-price { font-family: 'Orbitron'; font-size: 18px; color: var(--primary); font-weight: bold; margin-top: auto; display: flex; justify-content: space-between; align-items: center; }
        .btn-buy { padding: 8px 15px; background: rgba(0,255,136,0.1); border: 1px solid var(--primary); color: var(--primary); border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; text-decoration: none; font-size: 13px; }
        .btn-buy:hover { background: var(--primary); color: #000; }

        /* RESPONSIVE CHO BỐ CỤC MỚI */
        @media (max-width: 992px) {
            .sidebar { position: fixed; left: -250px; z-index: 1500; transition: 0.3s; }
            .sidebar.active { left: 0; }
            .shop-content { margin-left: 0; }
            .sidebar-toggle { display: block !important; cursor: pointer; font-size: 20px; margin-right: 15px; }
        }
        @media (max-width: 768px) {
            .desktop-menu, #desktopAuth { display: none; }
            .hamburger { display: block; }
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; } /* Điện thoại hiển thị 2 cột */
            .prod-thumb { height: 100px; }
            .prod-details { padding: 10px; }
            .prod-title { font-size: 14px; }
            .prod-price { font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>

    <header>
        <div class="container nav-flex">
            <div style="display:flex; align-items:center;">
                <i class="fas fa-stream sidebar-toggle" style="display:none; color:var(--primary); margin-right:15px;" onclick="toggleSidebar()"></i>
                <a href="index.html" class="logo"><i class="fas fa-shield-alt"></i> QUOCDAT<span>.SEC</span></a>
            </div>
            <nav class="desktop-menu">
                <a href="index.html">Trang Chủ</a>
                <a href="shop.html" class="active">Kho File VIP</a>
                <a href="getkey.html">Lấy Key</a>
                <a href="naptien.html" style="color:var(--primary)">Nạp Tiền</a>
            </nav>
            <div id="desktopAuth"></div>
            <div class="hamburger" onclick="toggleMenu(true)"><i class="fas fa-bars"></i></div>
        </div>
    </header>

    <div class="mobile-nav" id="mobileNav">
        <div style="text-align:right"><i class="fas fa-times" style="font-size:30px;color:#ff5555" onclick="toggleMenu(false)"></i></div>
        <div id="mobileUserArea"></div>
        <a href="index.html">Trang Chủ</a>
        <a href="shop.html" style="color:var(--primary)">Kho Tài Liệu</a>
        <a href="getkey.html">Lấy Key VIP</a>
        <a href="naptien.html">Nạp Tiền Hệ Thống</a>
        <a href="javascript:void(0)" onclick="logout()" style="color:#ff5555;margin-top:20px">Đăng Xuất</a>
    </div>

    <div class="main-layout">
        <div class="sidebar" id="shopSidebar">
            <h3 class="sidebar-title"><i class="fas fa-list"></i> DANH MỤC</h3>
            <div class="cat-list">
                <a href="#" class="active"><i class="fas fa-fire"></i> Tool Hot Nhất</a>
                <a href="#"><i class="fab fa-python"></i> Source Python</a>
                <a href="#"><i class="fas fa-gamepad"></i> Script Game</a>
                <a href="#"><i class="fas fa-robot"></i> Tool MMO Auto</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Bảo Mật & Anti</a>
            </div>
        </div>

        <div class="shop-content">
            <div class="shop-header">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm tool, script...">
                </div>
                <div class="sort-box">
                    <select>
                        <option>Mới nhất</option>
                        <option>Bán chạy nhất</option>
                        <option>Giá thấp đến cao</option>
                    </select>
                </div>
            </div>

            <h2 style="font-family:'Orbitron'; margin-bottom:20px; color:var(--primary)">TOOL HOT NHẤT</h2>
            
            <div class="product-grid">
                <div class="product-card">
                    <div class="prod-thumb">
                        <i class="fab fa-python"></i> <span class="prod-tag">HOT</span>
                    </div>
                    <div class="prod-details">
                        <div class="prod-title">Tool Obfuscate Python V8.0 Ultimate</div>
                        <div class="prod-meta"><span><i class="fas fa-download"></i> 1.2k đã bán</span><span>Ver 8.0</span></div>
                        <div class="prod-price">
                            <div>250.000đ</div>
                            <a href="getkey.html" class="btn-buy">MUA NGAY</a>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="prod-thumb"><i class="fas fa-gamepad"></i></div>
                    <div class="prod-details">
                        <div class="prod-title">Script Blox Fruit Auto Farm (No Key)</div>
                        <div class="prod-meta"><span><i class="fas fa-download"></i> 8.5k đã bán</span><span>Ver 2.1</span></div>
                        <div class="prod-price">
                            <div style="color:#fff">Miễn Phí</div>
                            <a href="getkey.html" class="btn-buy">TẢI VỀ</a>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="prod-thumb"><i class="fas fa-robot"></i><span class="prod-tag" style="background:#00b8ff">NEW</span></div>
                    <div class="prod-details">
                        <div class="prod-title">Bot Telegram Quản Lý Nhóm Auto</div>
                        <div class="prod-meta"><span><i class="fas fa-download"></i> 320 đã bán</span><span>V1.5</span></div>
                        <div class="prod-price">
                            <div>150.000đ</div>
                            <a href="getkey.html" class="btn-buy">MUA NGAY</a>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="prod-thumb"><i class="fas fa-shield-alt"></i></div>
                    <div class="prod-details">
                        <div class="prod-title">Source Web Bán Key Tự Động (Full API)</div>
                        <div class="prod-meta"><span><i class="fas fa-download"></i> 45 đã bán</span><span>Full Code</span></div>
                        <div class="prod-price">
                            <div>500.000đ</div>
                            <a href="getkey.html" class="btn-buy">MUA NGAY</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const config = {
            apiKey: "AIzaSyAWaCeduRtSP74OkRYJ6wvw8LPPkoLGsGc",
            authDomain: "quocdat-b80c2.firebaseapp.com",
            databaseURL: "https://quocdat-b80c2-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "quocdat-b80c2",
            storageBucket: "quocdat-b80c2.firebasestorage.app",
            messagingSenderId: "988520495087",
            appId: "1:988520495087:web:97c1b46fc0f6d1f3aaa81a"
        };
        firebase.initializeApp(config);
        const db = firebase.database();

        function toggleMenu(o) { document.getElementById('mobileNav').classList.toggle('open', o); }
        function toggleSidebar() { document.getElementById('shopSidebar').classList.toggle('active'); }
        function logout() { localStorage.removeItem('vip_username'); window.location.href = "login.html"; }

        document.addEventListener("DOMContentLoaded", function() {
            const u = localStorage.getItem('vip_username');
            if(!u) return;
            
            db.ref('users/' + u).on('value', (s) => {
                const b = s.exists() ? (s.val().balance || 0) : 0;
                const m = b.toLocaleString() + " đ";
                
                document.getElementById('desktopAuth').innerHTML = `
                    <div style="background:rgba(0,255,136,0.1);padding:6px 15px;border-radius:30px;border:1px solid var(--primary);color:var(--primary);font-weight:bold;font-family:'Orbitron';font-size:14px">
                        ${m} | <span style="color:#fff">${u}</span>
                    </div>
                `;
                document.getElementById('mobileUserArea').innerHTML = `
                    <div style="text-align:center;background:#111;padding:20px;border-radius:15px;margin-bottom:20px;border:1px dashed #333">
                        <div style="font-size:24px;color:var(--primary);font-weight:bold;font-family:monospace">${m}</div>
                        <div style="font-size:13px;color:#666;margin-top:5px">${u}</div>
                    </div>
                `;
            });
        });
    </script>
</body>
</html>
